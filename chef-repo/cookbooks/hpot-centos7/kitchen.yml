---
driver:
  name: vagrant

driver_config:
  network:
  - ["forwarded_port", {guest: 80,  host: 8088}]
  - ["forwarded_port", {guest: 443, host: 8443}]
  - ["forwarded_port", {guest: 23,  host: 2323}]

provisioner:
  name: chef_solo

verifier:
  name: inspec

platforms:
  - name: kitchen_box
    driver:
      box: crouchr/rch-centos7

suites:
  - name: dev
    run_list:
      - recipe[hpot-centos7]
      - recipe[hpot-centos7::motd]
      - recipe[hpot-centos7::create_my_user]
      - recipe[hpot-centos7::create_fake_users]
      - recipe[hpot-centos7::install_wazuh_agent]
      - recipe[hpot-centos7::install_keylogger]
      - recipe[hpot-centos7::install_hpot_services]
      - recipe[hpot-centos7::install_httpd]
      - recipe[hpot-centos7::install_waf]
      - recipe[hpot-centos7::install_web_vulns]
    verifier:
      inspec_tests:
        - test/integration
    attributes:
